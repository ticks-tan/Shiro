import{r as t,j as e}from"./index-D-KyWnh9.js";import{c as B,u as V,j as d,d as q}from"./request-DcgPSjoy.js";import{$ as G,s as H,P as J,a as y,b as N,c as P,d as K,e as Q}from"./Sheet-CilraLh5.js";import{u as X}from"./viewport-BLAU_psI.js";import{m as A}from"./motion-minimal-DZtZgbm6.js";import{u as Y,D as Z}from"./use-is-unmounted-R97kIIqo.js";import{m as _}from"./spring-BiPrtYZ-.js";import{u as ee}from"./use-event-callback-B3Y8bRlu.js";import{s as j}from"./dom-XXNktKeO.js";import{c as v}from"./StyledButton-DJLIYB63.js";import{u as se}from"./use-animation-Ijx6JBDS.js";import{A as te}from"./index-C7Hazlhz.js";const oe={},I=t.createContext(null),we=()=>t.useContext(I),c=B([]),$e=()=>({push(s){location.pathname=s}}),ne=()=>location.pathname,re=({className:s})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.4em",height:"1.4em",viewBox:"0 0 32 32",className:s,children:e.jsx("path",{fill:"currentColor",d:"M24 9.4L22.6 8L16 14.6L9.4 8L8 9.4l6.6 6.6L8 22.6L9.4 24l6.6-6.6l6.6 6.6l1.4-1.4l-6.6-6.6L24 9.4z"})}),S=({onClick:s,zIndex:o})=>e.jsx(G,{asChild:!0,children:e.jsx(A.div,{onClick:s,className:"fixed inset-0 z-[11] bg-zinc-50/80 dark:bg-neutral-900/80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{zIndex:o}})}),ae={scale:1,opacity:1},z={scale:.96,opacity:0},ie={..._},ce=t.memo(function({item:o,index:r,onClose:x,children:m}){const u=V(c),n=ee(()=>{u(i=>i.filter(C=>C.id!==o.id)),x?.(!1)}),a=t.useCallback(i=>{i||n()},[n]),{CustomModalComponent:k,modalClassName:R,content:D,title:g,clickOutsideToDismiss:w,modalContainerClassName:$,wrapper:p=t.Fragment,max:E}=o,O=t.useMemo(()=>({zIndex:99+r}),[r]),M=t.useCallback(i=>{j(i),n()},[n]),h=X(),T=Y(),l=se();t.useEffect(()=>{h||l.start(ae)},[l,h]);const F=t.useCallback(()=>{l.start({scale:1.05,transition:{duration:.06}}).then(()=>{T.current||l.start({scale:1})})},[l]),U=t.useRef(null),f=t.useMemo(()=>({dismiss:n}),[n]),W=t.useMemo(()=>({...f,ref:U}),[f]),b=e.jsx(I.Provider,{value:W,children:m||t.createElement(D,f)});if(h){const i=d.get(H).length;return e.jsx(p,{children:e.jsx(J,{title:g,defaultOpen:!0,zIndex:1e3+i,onOpenChange:C=>{C||setTimeout(()=>{n()},1e3)},content:b})})}return k?e.jsx(p,{children:e.jsx(y,{open:!0,onOpenChange:a,children:e.jsxs(N,{children:[e.jsx(S,{zIndex:20}),e.jsx(P,{asChild:!0,children:e.jsx("div",{className:v("fixed inset-0 z-20 overflow-auto",$),onClick:w?M:void 0,children:e.jsx("div",{className:"contents",onClick:j,children:e.jsx(k,{children:b})})})})]})})}):e.jsx(p,{children:e.jsx(y,{open:!0,onOpenChange:a,children:e.jsxs(N,{children:[e.jsx(S,{zIndex:20}),e.jsx(P,{asChild:!0,children:e.jsx("div",{className:v("fixed inset-0 z-20 flex center",$),onClick:w?M:F,children:e.jsxs(A.div,{style:O,exit:z,initial:z,animate:l,transition:ie,className:v("relative flex flex-col overflow-hidden rounded-lg","bg-zinc-50/80 dark:bg-neutral-900/80","p-2 shadow-2xl shadow-stone-300 backdrop-blur-sm dark:shadow-stone-800",E?"h-[90vh] w-[90vw]":"max-h-[70vh] min-w-[300px] max-w-[90vw] lg:max-h-[calc(100vh-20rem)] lg:max-w-[70vw]","border border-slate-200 dark:border-neutral-800",R),onClick:j,children:[e.jsxs("div",{className:"relative flex flex-1 items-center",children:[e.jsx(K,{className:"shrink-0 grow items-center px-4 py-1 text-lg font-medium",children:g}),e.jsx(Q,{className:"p-2",onClick:n,children:e.jsx(re,{})})]}),e.jsx(Z,{className:"my-2 shrink-0 border-slate-200 opacity-80 dark:border-neutral-800"}),e.jsx("div",{className:"min-h-0 shrink grow overflow-auto px-4 py-2",children:b})]})})})]})})})}),le=()=>{const s=ne();t.useEffect(()=>{L.dismissAll()},[s])},Me=s=>{const o=t.useId(),r=t.useRef(0),{wrapper:x}=s||{};return{present:t.useCallback(m=>{const u=`${o}-${++r.current}`;return d.set(c,n=>{const a={...m,id:m.id??u,wrapper:x};return oe[a.id]=a,n.concat(a)}),()=>{d.set(c,n=>n.filter(a=>a.id!==u))}},[o]),...L}},L={dismiss(s){d.set(c,o=>o.filter(r=>r.id!==s))},dismissTop(){d.set(c,s=>s.slice(0,-1))},dismissAll(){d.set(c,[])}},ye=({children:s})=>e.jsxs(e.Fragment,{children:[s,e.jsx(de,{})]}),de=()=>{const s=q(c);return le(),e.jsx(te,{mode:"popLayout",children:s.map((o,r)=>e.jsx(ce,{item:o,index:r},o.id))})};export{S as D,ye as M,$e as a,ne as b,we as c,Me as u};
